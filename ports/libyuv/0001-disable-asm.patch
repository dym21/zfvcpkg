From ac2ec915b91c64a6936071333ef72b972b658800 Mon Sep 17 00:00:00 2001
From: Your Name <you@example.com>
Date: Wed, 26 Nov 2025 09:36:20 +0800
Subject: [PATCH] disable-asm

---
 CMakeLists.txt | 66 --------------------------------------------------
 1 file changed, 66 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index d161326..717a48f 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -24,7 +24,6 @@ set ( ly_common_source_files
   ${ly_src_dir}/compare.cc
   ${ly_src_dir}/compare_common.cc
   ${ly_src_dir}/compare_gcc.cc
-  ${ly_src_dir}/compare_msa.cc
   ${ly_src_dir}/compare_win.cc
   ${ly_src_dir}/convert_argb.cc
   ${ly_src_dir}/convert.cc
@@ -42,26 +41,17 @@ set ( ly_common_source_files
   ${ly_src_dir}/rotate.cc
   ${ly_src_dir}/rotate_common.cc
   ${ly_src_dir}/rotate_gcc.cc
-  ${ly_src_dir}/rotate_lsx.cc
-  ${ly_src_dir}/rotate_msa.cc
   ${ly_src_dir}/rotate_win.cc
   ${ly_src_dir}/row_any.cc
   ${ly_src_dir}/row_common.cc
   ${ly_src_dir}/row_gcc.cc
-  ${ly_src_dir}/row_lasx.cc
-  ${ly_src_dir}/row_lsx.cc
-  ${ly_src_dir}/row_msa.cc
-  ${ly_src_dir}/row_rvv.cc
   ${ly_src_dir}/row_win.cc
   ${ly_src_dir}/scale_any.cc
   ${ly_src_dir}/scale_argb.cc
   ${ly_src_dir}/scale.cc
   ${ly_src_dir}/scale_common.cc
   ${ly_src_dir}/scale_gcc.cc
-  ${ly_src_dir}/scale_lsx.cc
-  ${ly_src_dir}/scale_msa.cc
   ${ly_src_dir}/scale_rgb.cc
-  ${ly_src_dir}/scale_rvv.cc
   ${ly_src_dir}/scale_uv.cc
   ${ly_src_dir}/scale_win.cc
   ${ly_src_dir}/video_common.cc)
@@ -83,62 +73,6 @@ set(CMAKE_POSITION_INDEPENDENT_CODE ON)
 add_library( ${ly_lib_name}_common_objects OBJECT ${ly_common_source_files} )
 set(ly_lib_parts $<TARGET_OBJECTS:${ly_lib_name}_common_objects>)
 
-if(NOT MSVC)
-  string(TOLOWER "${CMAKE_SYSTEM_PROCESSOR}" arch_lowercase)
-
-  if(arch_lowercase MATCHES "^arm" AND NOT arch_lowercase STREQUAL "arm64")
-    # Enable Arm Neon kernels.
-    add_definitions(-DLIBYUV_NEON=1)
-    add_library(${ly_lib_name}_neon OBJECT
-      ${ly_src_dir}/compare_neon.cc
-      ${ly_src_dir}/rotate_neon.cc
-      ${ly_src_dir}/row_neon.cc
-      ${ly_src_dir}/scale_neon.cc)
-    target_compile_options(${ly_lib_name}_neon PRIVATE -mfpu=neon)
-    list(APPEND ly_lib_parts $<TARGET_OBJECTS:${ly_lib_name}_neon>)
-  endif()
-
-  if(arch_lowercase STREQUAL "aarch64" OR arch_lowercase STREQUAL "arm64")
-    # Enable AArch64 Neon dot-product and i8mm kernels.
-    add_library(${ly_lib_name}_neon64 OBJECT
-      ${ly_src_dir}/compare_neon64.cc
-      ${ly_src_dir}/rotate_neon64.cc
-      ${ly_src_dir}/row_neon64.cc
-      ${ly_src_dir}/scale_neon64.cc)
-    target_compile_options(${ly_lib_name}_neon64 PRIVATE -march=armv8-a+dotprod+i8mm)
-    list(APPEND ly_lib_parts $<TARGET_OBJECTS:${ly_lib_name}_neon64>)
-
-    # Enable AArch64 SVE kernels.
-    add_library(${ly_lib_name}_sve OBJECT
-      ${ly_src_dir}/row_sve.cc)
-    target_compile_options(${ly_lib_name}_sve PRIVATE -march=armv9-a+sve2)
-    list(APPEND ly_lib_parts $<TARGET_OBJECTS:${ly_lib_name}_sve>)
-
-    set(OLD_CMAKE_REQURED_FLAGS ${CMAKE_REQUIRED_FLAGS})
-    set(OLD_CMAKE_TRY_COMPILE_TARGET_TYPE ${CMAKE_TRY_COMPILE_TARGET_TYPE})
-    set(CMAKE_REQUIRED_FLAGS "${CMAKE_REQUIRED_FLAGS} -march=armv9-a+sme")
-    set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY)
-    # Check whether the compiler can compile SME functions; this fails
-    # with Clang for Windows.
-    check_c_source_compiles("
-__arm_locally_streaming void func(void) { }
-int main(void) { return 0; }
-    " CAN_COMPILE_SME)
-    set(CMAKE_REQUIRED_FLAGS ${OLD_CMAKE_REQURED_FLAGS})
-    set(CMAKE_TRY_COMPILE_TARGET_TYPE ${OLD_CMAKE_TRY_COMPILE_TARGET_TYPE})
-
-    if (CAN_COMPILE_SME)
-      # Enable AArch64 SME kernels.
-      add_library(${ly_lib_name}_sme OBJECT
-        ${ly_src_dir}/rotate_sme.cc)
-      target_compile_options(${ly_lib_name}_sme PRIVATE -march=armv9-a+sme)
-      list(APPEND ly_lib_parts $<TARGET_OBJECTS:${ly_lib_name}_sme>)
-    else()
-      add_definitions(-DLIBYUV_DISABLE_SME)
-    endif()
-  endif()
-endif()
-
 # this creates the static library (.a)
 add_library( ${ly_lib_static} STATIC ${ly_lib_parts})
 
-- 
2.50.1

