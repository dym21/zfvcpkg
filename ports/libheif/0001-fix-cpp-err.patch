From e61b3ed7962d31cde2880d24dce79c922ea6b6cf Mon Sep 17 00:00:00 2001
From: Your Name <you@example.com>
Date: Thu, 25 Sep 2025 14:38:16 +0800
Subject: [PATCH] fix-cpp-err

---
 libheif/error.cc | 20 --------------------
 1 file changed, 20 deletions(-)

diff --git a/libheif/error.cc b/libheif/error.cc
index ff19667..bc065bb 100644
--- a/libheif/error.cc
+++ b/libheif/error.cc
@@ -51,27 +51,7 @@ Error::Error(heif_error_code c,
 Error Error::from_heif_error(const heif_error& c_error)
 {
   // unpack the concatenated error message and extract the last part only
-
-  const char* err_string = get_error_string(c_error.code);
-  const char* sub_err_string = get_error_string(c_error.subcode);
-
   std::string msg = c_error.message;
-  if (msg.starts_with(err_string)) {
-    msg = msg.substr(strlen(err_string));
-
-    if (msg.starts_with(": ")) {
-      msg = msg.substr(2);
-    }
-
-    if (msg.starts_with(sub_err_string)) {
-      msg = msg.substr(strlen(sub_err_string));
-
-      if (msg.starts_with(": ")) {
-        msg = msg.substr(2);
-      }
-    }
-  }
-
   return {c_error.code, c_error.subcode, msg};
 }
 
-- 
2.45.1.windows.1

